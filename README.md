# Движок управляемого повествования
Backend-сервис, предоставляющий API для фронтенд-приложения и реализующий сложную логику взаимодействия с LLM для обеспечения когерентного, управляемого сюжетом ролевого опыта для пользователя.

## Технологический стек
- **Язык программирования:** Python 3.10+
- **Веб-фреймворк:** FastAPI
- **Веб-сервер:** Uvicorn
- **Валидация данных:** Pydantic
- **ИИ-фреймворк:** LangChain
- **Векторная база данных:** ChromaDB (локальная)
- **Внешние сервисы:** Google Gemini API

## Архитектура 
Сервис построен на базе "Оркестратора", реализующего двух- или трехконтурную RAG-архитектуру:
- Сам **Оркестратор** — основной логический модуль, получает запросы от API, управляет вызовами RAG-контуров и LLM.
- **Первый контур** — векторная база данных, хранящая неизменные правила поведения, стиля речи и личности ИИ-персонажа (в будущем — и личность персонажа пользователя), обеспечивает _стабильность роли_.
- **Второй контур** — векторная база даннных, хранящая динамически обновляемые краткие содержания (summmary) предыдущих сцен, обеспечивает _долгосрочную память внутри диалога_.
- **Третий контур** — векторная база данных, хранящая чек-поинты сюжета, обеспечивает _следование сюжетной тропе_ (важен для режима **Сценарий**, опускается в режиме **Песочницы**).

## API Эндпоинты
- `POST /api/v1/chat` — основной эндпоинт для обработки ответа пользователя, запускает Оркестратора для генерации ответа ИИ.
- `GET /api/v1/characters` — получение списка всех доступных ИИ-персонажей.
- `GET /api/v1/scenarios` — получение списка всех доступных сценарией (для режима **Сценарий**).
